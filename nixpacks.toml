# Nixpacks configuration for Railway static site deployment
# This tells Railway how to build and serve the Vite frontend

# Disable auto-detected providers to use our custom commands
providers = []

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = ["npm ci"]
dependsOn = ["setup"]

[phases.build]
cmds = [
    "npm run build",
    "echo '=== Build verification ===' && ls -la dist/ && head -3 dist/index.html"
]
dependsOn = ["install"]

[start]
cmd = "npx serve ./dist -s -l $PORT"

{"openapi":"3.1.0","info":{"title":"MDM Comics API","description":"\n## MDM Comics E-Commerce API\n\nAI-powered comic book grading and e-commerce platform for collectors.\n\n### Features\n- **Authentication**: JWT-based auth with HttpOnly cookies and CSRF protection\n- **Products**: Browse, search, and manage comic inventory\n- **Cart & Checkout**: Full shopping cart with Stripe payment integration\n- **Comic Database**: Search comics via Metron API with local caching\n- **Funko Database**: Browse and search Funko Pop! collectibles\n- **AI Grading**: Coming soon - ML-powered comic grade estimation\n\n### Authentication\nMost endpoints require authentication. Use `/api/auth/login` to get tokens.\nTokens are set as HttpOnly cookies for web clients, or returned in the response body for API clients.\n\n### Rate Limits\n- Auth endpoints: 5 requests/minute\n- Checkout: 10 requests/minute\n- General: 100 requests/minute\n\n### Security\n- All mutations require CSRF token (for cookie-based auth)\n- Passwords must be 8+ chars with uppercase, lowercase, and digit\n- Tokens expire in 30 minutes (access) / 7 days (refresh)\n    ","contact":{"name":"MDM Comics Support","url":"https://mdmcomics.com/","email":"support@mdmcomics.com"},"license":{"name":"Proprietary"},"version":"1.0.0"},"paths":{"/api/auth/register":{"post":{"tags":["Authentication"],"summary":"Register","description":"Register a new user and return tokens.\n\nP1-5: Sets HttpOnly cookies for web clients.\nAlso returns tokens in body for API/mobile compatibility.\n\nUser Management System v1.0.0:\n- Password policy enforcement\n- Audit logging\n- Auto-assign customer role","operationId":"register_api_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/login":{"post":{"tags":["Authentication"],"summary":"Login","description":"Login and get access token.\n\nP1-5: Sets HttpOnly cookies for web clients.\nAlso returns tokens in body for API/mobile compatibility.\n\nUser Management System v1.0.0:\n- Account lockout protection\n- Audit logging for login attempts\n- Session tracking","operationId":"login_api_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLogin"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/logout":{"post":{"tags":["Authentication"],"summary":"Logout","description":"P1-5: Logout and clear auth cookies.\n\nFor cookie-based auth, this clears all auth cookies.\nFor header-based auth, the client should discard the token.","operationId":"logout_api_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/auth/me":{"get":{"tags":["Authentication"],"summary":"Get Me","description":"Get current authenticated user","operationId":"get_me_api_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/auth/logout-all":{"post":{"tags":["Authentication"],"summary":"Logout All Devices","description":"P2-8: Logout from all devices.\n\nRevokes all tokens issued before now for this user.\nClears current session cookies.","operationId":"logout_all_devices_api_auth_logout_all_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/auth/refresh":{"post":{"tags":["Authentication"],"summary":"Refresh Token Endpoint","description":"Get new access token using refresh token.\n\nP1-5: Supports both cookie-based and body-based refresh tokens.\n- For web clients: reads refresh token from HttpOnly cookie\n- For API/mobile: reads from request body\n\nAlways returns new tokens and sets new cookies.","operationId":"refresh_token_endpoint_api_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/RefreshToken"},{"type":"null"}],"title":"Token Data"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/admin-setup":{"post":{"tags":["Authentication"],"summary":"Setup Admin","description":"One-time admin setup - requires secret key","operationId":"setup_admin_api_auth_admin_setup_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminSetupRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/password-reset/request":{"post":{"tags":["Authentication"],"summary":"Request Password Reset","description":"Request a password reset token.\n\nAlways returns success to prevent email enumeration.\nToken is sent via email (not returned in response).","operationId":"request_password_reset_api_auth_password_reset_request_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/password-reset/confirm":{"post":{"tags":["Authentication"],"summary":"Confirm Password Reset","description":"Complete password reset with token.","operationId":"confirm_password_reset_api_auth_password_reset_confirm_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetConfirm"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/password/change":{"post":{"tags":["Authentication"],"summary":"Change Password","description":"Change password (requires current password).","operationId":"change_password_api_auth_password_change_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordChange"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/auth/password/requirements":{"get":{"tags":["Authentication"],"summary":"Get Password Requirements","description":"Get password policy requirements.","operationId":"get_password_requirements_api_auth_password_requirements_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordStrengthResponse"}}}}}}},"/api/auth/password/check-strength":{"post":{"tags":["Authentication"],"summary":"Check Password Strength","description":"Check password strength without storing.","operationId":"check_password_strength_api_auth_password_check_strength_post","parameters":[{"name":"password","in":"query","required":true,"schema":{"type":"string","title":"Password"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordStrengthResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/email/request-verification":{"post":{"tags":["Authentication"],"summary":"Request Email Verification","description":"Request email verification (resend verification email).","operationId":"request_email_verification_api_auth_email_request_verification_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/auth/email/verify":{"post":{"tags":["Authentication"],"summary":"Verify Email","description":"Verify email with token.","operationId":"verify_email_api_auth_email_verify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailVerificationConfirm"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/sessions":{"get":{"tags":["Authentication"],"summary":"List Sessions","description":"List active sessions for current user.","operationId":"list_sessions_api_auth_sessions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/auth/sessions/{session_id}":{"delete":{"tags":["Authentication"],"summary":"Revoke Session","description":"Revoke a specific session.","operationId":"revoke_session_api_auth_sessions__session_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"integer","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/users/me":{"get":{"tags":["Users"],"summary":"Get Current User Info","description":"Get current user profile","operationId":"get_current_user_info_api_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"HTTPBearer":[]}]},"patch":{"tags":["Users"],"summary":"Update Current User","description":"Update current user profile","operationId":"update_current_user_api_users_me_patch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/users/promote-admin":{"post":{"tags":["Users"],"summary":"Promote To Admin","description":"Promote a user to admin status.\n\nRequires SECRET_KEY in the X-Admin-Secret header.","operationId":"promote_to_admin_api_users_promote_admin_post","parameters":[{"name":"X-Admin-Secret","in":"header","required":true,"schema":{"type":"string","title":"X-Admin-Secret"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromoteRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/products":{"get":{"tags":["Products"],"summary":"List Products","description":"List products with filtering, sorting, and pagination","operationId":"list_products_api_products_get","parameters":[{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"}},{"name":"subcategory","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subcategory"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}},{"name":"featured","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Featured"}},{"name":"min_price","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Min Price"}},{"name":"max_price","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Max Price"}},{"name":"in_stock","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"In Stock"}},{"name":"sort","in":"query","required":false,"schema":{"type":"string","pattern":"^(featured|price_asc|price_desc|rating|newest)$","default":"featured","title":"Sort"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Per Page"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductList"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Products"],"summary":"Create Product","description":"Create new product (admin only)","operationId":"create_product_api_products_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/products/{product_id}":{"get":{"tags":["Products"],"summary":"Get Product","description":"Get single product by ID","operationId":"get_product_api_products__product_id__get","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Products"],"summary":"Update Product","description":"Update product (admin only)","operationId":"update_product_api_products__product_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Products"],"summary":"Delete Product","description":"Delete product (admin only)","operationId":"delete_product_api_products__product_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/cart":{"get":{"tags":["Cart"],"summary":"Get Cart","description":"Get current user's cart","operationId":"get_cart_api_cart_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartResponse"}}}}},"security":[{"HTTPBearer":[]}]},"delete":{"tags":["Cart"],"summary":"Clear Cart","description":"Clear entire cart","operationId":"clear_cart_api_cart_delete","responses":{"204":{"description":"Successful Response"}},"security":[{"HTTPBearer":[]}]}},"/api/cart/items":{"post":{"tags":["Cart"],"summary":"Add To Cart","description":"Add item to cart","operationId":"add_to_cart_api_cart_items_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartItemCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/cart/items/{item_id}":{"patch":{"tags":["Cart"],"summary":"Update Cart Item","description":"Update cart item quantity","operationId":"update_cart_item_api_cart_items__item_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"integer","title":"Item Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartItemUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Cart"],"summary":"Remove From Cart","description":"Remove item from cart","operationId":"remove_from_cart_api_cart_items__item_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"integer","title":"Item Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/orders":{"get":{"tags":["Orders"],"summary":"List Orders","description":"Get current user's orders with pagination.\n\nP2-10: Added pagination to prevent unbounded queries.","operationId":"list_orders_api_orders_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderList"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Orders"],"summary":"Create Order","description":"Create order from cart","operationId":"create_order_api_orders_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/orders/{order_id}":{"get":{"tags":["Orders"],"summary":"Get Order","description":"Get single order","operationId":"get_order_api_orders__order_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","title":"Order Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/grading/estimate":{"post":{"tags":["AI Grading"],"summary":"Quick Estimate","description":"Quick grade estimate from image URL.\nDISABLED: Returns 503 until real ML model is deployed.","operationId":"quick_estimate_api_grading_estimate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradeEstimate"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/grading/estimate/upload":{"post":{"tags":["AI Grading"],"summary":"Estimate From Upload","description":"Grade estimate from uploaded image file.\nDISABLED: Returns 503 until real ML model is deployed.\n\nP2-1: Image validation happens before feature check for security.","operationId":"estimate_from_upload_api_grading_estimate_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_estimate_from_upload_api_grading_estimate_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradeEstimate"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/grading/history":{"get":{"tags":["AI Grading"],"summary":"Grade History","description":"Get user's grade estimation history","operationId":"grade_history_api_grading_history_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/grading/grade-scale":{"get":{"tags":["AI Grading"],"summary":"Get Grade Scale","description":"Get CGC grade scale reference.\nUseful for displaying grade meanings to users.","operationId":"get_grade_scale_api_grading_grade_scale_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/comics/search":{"get":{"tags":["Comics Database","comics"],"summary":"Search Comics","description":"Search for comic issues in the Metron database.\nAll results are cached locally for future use.\nSupports UPC barcode search for exact match.","operationId":"search_comics_api_comics_search_get","parameters":[{"name":"series","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Series name (e.g., 'amazing spider-man')","title":"Series"},"description":"Series name (e.g., 'amazing spider-man')"},{"name":"number","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Issue number (e.g., '300')","title":"Number"},"description":"Issue number (e.g., '300')"},{"name":"publisher","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Publisher name (e.g., 'marvel')","title":"Publisher"},"description":"Publisher name (e.g., 'marvel')"},{"name":"year","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Cover year","title":"Year"},"description":"Cover year"},{"name":"upc","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"UPC barcode number","title":"Upc"},"description":"UPC barcode number"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/comics/issue/{issue_id}":{"get":{"tags":["Comics Database","comics"],"summary":"Get Issue","description":"Get detailed information about a specific comic issue.\nFull data including credits, characters, etc. is cached locally.","operationId":"get_issue_api_comics_issue__issue_id__get","parameters":[{"name":"issue_id","in":"path","required":true,"schema":{"type":"integer","title":"Issue Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/comics/series":{"get":{"tags":["Comics Database","comics"],"summary":"Search Series","description":"Search for comic series. Results are cached locally.","operationId":"search_series_api_comics_series_get","parameters":[{"name":"name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Series name","title":"Name"},"description":"Series name"},{"name":"publisher","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Publisher name","title":"Publisher"},"description":"Publisher name"},{"name":"year","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Year series began","title":"Year"},"description":"Year series began"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/comics/series/{series_id}":{"get":{"tags":["Comics Database","comics"],"summary":"Get Series","description":"Get detailed information about a specific series.","operationId":"get_series_api_comics_series__series_id__get","parameters":[{"name":"series_id","in":"path","required":true,"schema":{"type":"integer","title":"Series Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/comics/publishers":{"get":{"tags":["Comics Database","comics"],"summary":"Get Publishers","description":"Get list of comic publishers. All are cached locally.","operationId":"get_publishers_api_comics_publishers_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/comics/characters":{"get":{"tags":["Comics Database","comics"],"summary":"Search Characters","description":"Search for characters in the Metron database.","operationId":"search_characters_api_comics_characters_get","parameters":[{"name":"name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Character name","title":"Name"},"description":"Character name"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/comics/creators":{"get":{"tags":["Comics Database","comics"],"summary":"Search Creators","description":"Search for creators (writers, artists, etc.).","operationId":"search_creators_api_comics_creators_get","parameters":[{"name":"name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Creator name","title":"Name"},"description":"Creator name"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/comics/search-by-image":{"post":{"tags":["Comics Database","comics"],"summary":"Search By Image","description":"Search for comics by cover image using perceptual hashing.\nReturns potential matches ranked by similarity.\n\nBE-003 OPTIMIZATION: Uses indexed cover_hash column instead of\nscanning raw_data JSON. Only queries issues that HAVE a cover_hash.\n\nP2-1: Enhanced image validation with magic bytes check.","operationId":"search_by_image_api_comics_search_by_image_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_search_by_image_api_comics_search_by_image_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/checkout/create-payment-intent":{"post":{"tags":["Checkout","checkout"],"summary":"Create Payment Intent","description":"Create a Stripe PaymentIntent with stock reservation.\n\nSAFE CHECKOUT FLOW:\n1. Lock products with FOR UPDATE (pessimistic locking)\n2. Validate stock availability\n3. Decrement stock (reserve)\n4. Create reservation records\n5. Create Stripe PaymentIntent\n6. Return client_secret\n\nIf payment fails/expires, background job restores stock.","operationId":"create_payment_intent_api_checkout_create_payment_intent_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentIntentRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/checkout/confirm-order":{"post":{"tags":["Checkout","checkout"],"summary":"Confirm Order","description":"Called after successful payment to create the order.\n\nSAFE FLOW:\n1. Verify payment succeeded with Stripe\n2. Verify reservation exists and belongs to user\n3. Create order from reservation data\n4. Delete reservation (stock already decremented)","operationId":"confirm_order_api_checkout_confirm_order_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfirmOrderRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/checkout/cancel-reservation":{"post":{"tags":["Checkout","checkout"],"summary":"Cancel Reservation","description":"Cancel a reservation and restore stock.\nCalled when user cancels checkout.","operationId":"cancel_reservation_api_checkout_cancel_reservation_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"payment_intent_id","in":"query","required":true,"schema":{"type":"string","title":"Payment Intent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/checkout/config":{"get":{"tags":["Checkout","checkout"],"summary":"Get Stripe Config","description":"Return publishable key for frontend.\nThis is safe to expose - it's meant to be public.","operationId":"get_stripe_config_api_checkout_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/checkout/stripe-webhook":{"post":{"tags":["Checkout","checkout"],"summary":"Stripe Webhook","description":"P1-4: Stripe webhook handler with signature verification.\nBLOCK-004: Updated to use Redis for cross-instance idempotency.\n\nSECURITY:\n1. Verifies webhook signature using STRIPE_WEBHOOK_SECRET\n2. Idempotent - stores processed event IDs in Redis to prevent duplicates\n3. Only processes payment_intent.succeeded events\n\nThis replaces client-trust model where frontend confirms payment.\nNow Stripe tells us directly when payment succeeds.","operationId":"stripe_webhook_api_checkout_stripe_webhook_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/funkos/search":{"get":{"tags":["Funko Database","funkos"],"summary":"Search Funkos","description":"Search Funkos by title, series, category, license, product type, or box number.\nReturns paginated results.","operationId":"search_funkos_api_funkos_search_get","parameters":[{"name":"q","in":"query","required":false,"schema":{"type":"string","description":"Search query (title)","title":"Q"},"description":"Search query (title)"},{"name":"series","in":"query","required":false,"schema":{"type":"string","description":"Filter by series name","title":"Series"},"description":"Filter by series name"},{"name":"category","in":"query","required":false,"schema":{"type":"string","description":"Filter by category","title":"Category"},"description":"Filter by category"},{"name":"license","in":"query","required":false,"schema":{"type":"string","description":"Filter by license","title":"License"},"description":"Filter by license"},{"name":"product_type","in":"query","required":false,"schema":{"type":"string","description":"Filter by product type","title":"Product Type"},"description":"Filter by product type"},{"name":"box_number","in":"query","required":false,"schema":{"type":"string","description":"Filter by box number","title":"Box Number"},"description":"Filter by box number"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Per Page"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FunkoSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/funkos/series":{"get":{"tags":["Funko Database","funkos"],"summary":"Get Series","description":"Get list of Funko series/categories","operationId":"get_series_api_funkos_series_get","parameters":[{"name":"q","in":"query","required":false,"schema":{"type":"string","description":"Search series name","title":"Q"},"description":"Search series name"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SeriesSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/funkos/{funko_id}":{"get":{"tags":["Funko Database","funkos"],"summary":"Get Funko","description":"Get a specific Funko by ID","operationId":"get_funko_api_funkos__funko_id__get","parameters":[{"name":"funko_id","in":"path","required":true,"schema":{"type":"integer","title":"Funko Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FunkoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/funkos/stats/count":{"get":{"tags":["Funko Database","funkos"],"summary":"Get Funko Count","description":"Get total count of Funkos in database and enrichment status","operationId":"get_funko_count_api_funkos_stats_count_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/analytics/beacon/events":{"post":{"tags":["Analytics"],"summary":"Ingest Events","description":"Ingest a batch of analytics events.\n\nAccepts compressed (gzip) or uncompressed JSON payloads.","operationId":"ingest_events_api_analytics_beacon_events_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventBatch"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/analytics/beacon/vitals":{"post":{"tags":["Analytics"],"summary":"Ingest Vitals","description":"Ingest Core Web Vitals measurement.","operationId":"ingest_vitals_api_analytics_beacon_vitals_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VitalsPayload"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/analytics/beacon/replay":{"post":{"tags":["Analytics"],"summary":"Ingest Replay","description":"Ingest session replay chunk.\n\nExpects multipart or raw binary data with metadata in headers.","operationId":"ingest_replay_api_analytics_beacon_replay_post","responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/analytics/identify":{"post":{"tags":["Analytics"],"summary":"Identify Session","description":"Associate current user with a session.\n\nCalled on login/registration to link anonymous session to user.","operationId":"identify_session_api_analytics_identify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdentifyPayload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/analytics/opt-out":{"post":{"tags":["Analytics"],"summary":"Opt Out","description":"Opt out of analytics tracking.\n\nSets a cookie to disable tracking on future visits.","operationId":"opt_out_api_analytics_opt_out_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/analytics/opt-out/status":{"get":{"tags":["Analytics"],"summary":"Opt Out Status","description":"Check if user has opted out.","operationId":"opt_out_status_api_analytics_opt_out_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/coupons/validate":{"post":{"tags":["Coupons"],"summary":"Validate Coupon","description":"Validate a coupon code against the current cart.\n\nReturns discount amount if valid, error message if not.","operationId":"validate_coupon_api_coupons_validate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidateCouponRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CouponResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/coupons/apply":{"post":{"tags":["Coupons"],"summary":"Apply Coupon","description":"Apply a coupon to the cart (record usage).\n\nCall this when user confirms they want to use the coupon.","operationId":"apply_coupon_api_coupons_apply_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidateCouponRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/coupons/admin/list":{"get":{"tags":["Coupons"],"summary":"List Coupons","description":"List all coupons (admin only).","operationId":"list_coupons_api_coupons_admin_list_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"active_only","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Active Only"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CouponListResponse"},"title":"Response List Coupons Api Coupons Admin List Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/coupons/admin/create":{"post":{"tags":["Coupons"],"summary":"Create Coupon","description":"Create a new coupon (admin only).","operationId":"create_coupon_api_coupons_admin_create_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCouponRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/coupons/admin/{coupon_id}/toggle":{"patch":{"tags":["Coupons"],"summary":"Toggle Coupon","description":"Toggle coupon active status (admin only).","operationId":"toggle_coupon_api_coupons_admin__coupon_id__toggle_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"coupon_id","in":"path","required":true,"schema":{"type":"integer","title":"Coupon Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/coupons/admin/{coupon_id}":{"delete":{"tags":["Coupons"],"summary":"Delete Coupon","description":"Delete a coupon (admin only).","operationId":"delete_coupon_api_coupons_admin__coupon_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"coupon_id","in":"path","required":true,"schema":{"type":"integer","title":"Coupon Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/barcode-queue":{"post":{"tags":["Admin","admin"],"summary":"Add To Barcode Queue","description":"Add barcodes to the scan queue (mobile scanner uses this).\n\nImmediately attempts to match each barcode against existing products.\nIf match found, can optionally auto-increment stock.","operationId":"add_to_barcode_queue_api_admin_barcode_queue_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BarcodeQueueRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Admin","admin"],"summary":"List Barcode Queue","description":"List queued barcodes with optional status filter.","operationId":"list_barcode_queue_api_admin_barcode_queue_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(pending|matched|processing|processed|failed|skipped)$"},{"type":"null"}],"title":"Status"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/barcode-queue/{queue_id}/process":{"post":{"tags":["Admin","admin"],"summary":"Process Queue Item","description":"Process a single queued barcode item.","operationId":"process_queue_item_api_admin_barcode_queue__queue_id__process_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"queue_id","in":"path","required":true,"schema":{"type":"integer","title":"Queue Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueueProcessRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/barcode-queue/batch-process":{"post":{"tags":["Admin","admin"],"summary":"Batch Process Queue","description":"Process multiple queue items at once.","operationId":"batch_process_queue_api_admin_barcode_queue_batch_process_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchProcessRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/products":{"get":{"tags":["Admin","admin"],"summary":"List Products","description":"Enhanced product listing with inventory data.","operationId":"list_products_api_admin_products_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"}},{"name":"low_stock","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Low Stock"}},{"name":"include_deleted","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Deleted"}},{"name":"sort","in":"query","required":false,"schema":{"type":"string","pattern":"^-?(name|price|stock|updated_at|created_at)$","default":"-updated_at","title":"Sort"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":25,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/products/{product_id}":{"patch":{"tags":["Admin","admin"],"summary":"Update Product","description":"Update product details.","operationId":"update_product_api_admin_products__product_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Admin","admin"],"summary":"Delete Product","description":"Soft delete a product.","operationId":"delete_product_api_admin_products__product_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/products/{product_id}/restore":{"post":{"tags":["Admin","admin"],"summary":"Restore Product","description":"Restore a soft-deleted product.","operationId":"restore_product_api_admin_products__product_id__restore_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/products/{product_id}/adjust-stock":{"post":{"tags":["Admin","admin"],"summary":"Adjust Product Stock","description":"Adjust stock with audit trail.","operationId":"adjust_product_stock_api_admin_products__product_id__adjust_stock_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StockAdjustmentRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/products/{product_id}/stock-history":{"get":{"tags":["Admin","admin"],"summary":"Get Stock History","description":"Get stock movement history for a product.","operationId":"get_stock_history_api_admin_products__product_id__stock_history_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/reports/inventory-summary":{"get":{"tags":["Admin","admin"],"summary":"Get Inventory Summary","description":"Get inventory summary with value calculations.","operationId":"get_inventory_summary_api_admin_reports_inventory_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/reports/low-stock":{"get":{"tags":["Admin","admin"],"summary":"Get Low Stock Report","description":"Get products below their low stock threshold.","operationId":"get_low_stock_report_api_admin_reports_low_stock_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/reports/price-changes":{"get":{"tags":["Admin","admin"],"summary":"Get Price Changes","description":"Get significant price changes from price_changelog.","operationId":"get_price_changes_api_admin_reports_price_changes_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"minimum":1,"default":7,"title":"Days"}},{"name":"threshold_pct","in":"query","required":false,"schema":{"type":"number","minimum":0.0,"default":10.0,"title":"Threshold Pct"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/users":{"get":{"tags":["Admin - Users"],"summary":"List Users","description":"List all users with filtering and pagination.\n\nRequires: users:read permission","operationId":"list_users_api_admin_users_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search by email or name","title":"Search"},"description":"Search by email or name"},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},{"name":"is_admin","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Admin"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Per Page"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Admin - Users"],"summary":"Create User","description":"Create a new user (admin).\n\nRequires: users:create permission","operationId":"create_user_api_admin_users_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__routes__admin_users__UserCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/users/{user_id}":{"get":{"tags":["Admin - Users"],"summary":"Get User","description":"Get detailed user info.\n\nRequires: users:read permission","operationId":"get_user_api_admin_users__user_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Admin - Users"],"summary":"Update User","description":"Update user profile.\n\nRequires: users:update permission","operationId":"update_user_api_admin_users__user_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__routes__admin_users__UserUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Admin - Users"],"summary":"Delete User","description":"Soft-delete or hard-delete a user.\n\nRequires: users:delete permission","operationId":"delete_user_api_admin_users__user_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"hard_delete","in":"query","required":false,"schema":{"type":"boolean","description":"Permanently delete (GDPR)","default":false,"title":"Hard Delete"},"description":"Permanently delete (GDPR)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/users/{user_id}/toggle-admin":{"post":{"tags":["Admin","admin"],"summary":"Toggle User Admin","description":"Toggle admin status for a user.","operationId":"toggle_user_admin_api_admin_users__user_id__toggle_admin_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipping/addresses":{"post":{"tags":["Shipping","shipping"],"summary":"Create Address","description":"Create a new shipping address.\n\nPII fields are encrypted before storage.\nAddress is validated with UPS if validate_address is true.","operationId":"create_address_api_shipping_addresses_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Shipping","shipping"],"summary":"List Addresses","description":"Get all addresses for the current user.","operationId":"list_addresses_api_shipping_addresses_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"address_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by type: shipping, billing","title":"Address Type"},"description":"Filter by type: shipping, billing"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AddressResponse"},"title":"Response List Addresses Api Shipping Addresses Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipping/addresses/{address_id}":{"get":{"tags":["Shipping","shipping"],"summary":"Get Address","description":"Get a specific address.","operationId":"get_address_api_shipping_addresses__address_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"address_id","in":"path","required":true,"schema":{"type":"integer","title":"Address Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Shipping","shipping"],"summary":"Delete Address","description":"Soft delete an address.","operationId":"delete_address_api_shipping_addresses__address_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"address_id","in":"path","required":true,"schema":{"type":"integer","title":"Address Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipping/addresses/{address_id}/validate":{"post":{"tags":["Shipping","shipping"],"summary":"Validate Address","description":"Validate an address with UPS.","operationId":"validate_address_api_shipping_addresses__address_id__validate_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"address_id","in":"path","required":true,"schema":{"type":"integer","title":"Address Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressValidationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipping/rates":{"post":{"tags":["Shipping","shipping"],"summary":"Get Shipping Rates","description":"Get available shipping rates for a destination.\n\nReturns a list of rate options with pricing and delivery estimates.\nRate quotes expire after 30 minutes.","operationId":"get_shipping_rates_api_shipping_rates_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RateListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/shipping/rates/select":{"post":{"tags":["Shipping","shipping"],"summary":"Select Shipping Rate","description":"Select a rate quote for checkout.","operationId":"select_shipping_rate_api_shipping_rates_select_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SelectRateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/shipping/shipments":{"post":{"tags":["Shipping","shipping"],"summary":"Create Shipment","description":"Create a shipment and generate shipping label.\n\nThis is typically called by admin or after order is ready to ship.\nReturns tracking number and label data.","operationId":"create_shipment_api_shipping_shipments_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Shipping","shipping"],"summary":"List Shipments","description":"List shipments for the current user.","operationId":"list_shipments_api_shipping_shipments_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"order_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Order Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipping/shipments/{shipment_id}":{"get":{"tags":["Shipping","shipping"],"summary":"Get Shipment","description":"Get a specific shipment.","operationId":"get_shipment_api_shipping_shipments__shipment_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"shipment_id","in":"path","required":true,"schema":{"type":"integer","title":"Shipment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipping/shipments/{shipment_id}/label":{"get":{"tags":["Shipping","shipping"],"summary":"Get Shipping Label","description":"Get the shipping label for a shipment.","operationId":"get_shipping_label_api_shipping_shipments__shipment_id__label_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"shipment_id","in":"path","required":true,"schema":{"type":"integer","title":"Shipment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LabelResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipping/shipments/{shipment_id}/tracking":{"get":{"tags":["Shipping","shipping"],"summary":"Get Tracking","description":"Get tracking information for a shipment.","operationId":"get_tracking_api_shipping_shipments__shipment_id__tracking_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"shipment_id","in":"path","required":true,"schema":{"type":"integer","title":"Shipment Id"}},{"name":"refresh","in":"query","required":false,"schema":{"type":"boolean","description":"Force refresh from carrier","default":false,"title":"Refresh"},"description":"Force refresh from carrier"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrackingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipping/shipments/{shipment_id}/void":{"post":{"tags":["Shipping","shipping"],"summary":"Void Shipment","description":"Void a shipment (admin only).\n\nCan only void shipments that haven't been picked up yet.","operationId":"void_shipment_api_shipping_shipments__shipment_id__void_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"shipment_id","in":"path","required":true,"schema":{"type":"integer","title":"Shipment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoidShipmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipping/track/{tracking_number}":{"get":{"tags":["Shipping","shipping"],"summary":"Public Tracking","description":"Public tracking lookup by tracking number.\n\nDoes not require authentication.\nReturns limited information for privacy.","operationId":"public_tracking_api_shipping_track__tracking_number__get","parameters":[{"name":"tracking_number","in":"path","required":true,"schema":{"type":"string","title":"Tracking Number"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/contact":{"post":{"tags":["Contact","Contact"],"summary":"Submit contact form","description":"Submit a contact form inquiry.\n\n**Rate Limit**: 5 requests per minute per IP address.\n\n**Subject Options**:\n- `general`: General Inquiry\n- `order`: Order Question\n- `returns`: Returns & Exchanges\n- `wholesale`: Wholesale Inquiry\n- `other`: Other\n\n**Response Codes**:\n- `202`: Form accepted for processing\n- `422`: Validation error (check field requirements)\n- `429`: Rate limit exceeded (try again later)","operationId":"submit_contact_form_api_contact_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContactFormRequest"}}},"required":true},"responses":{"202":{"description":"Contact form submitted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContactFormResponse"}}}},"422":{"description":"Validation error","content":{"application/json":{"example":{"detail":[{"loc":["body","message"],"msg":"String should have at least 10 characters","type":"string_too_short"}]}}}},"429":{"description":"Rate limit exceeded","content":{"application/json":{"example":{"detail":"Rate limit exceeded: 5 per 1 minute"}}}}}}},"/api/admin/users/{user_id}/restore":{"post":{"tags":["Admin - Users"],"summary":"Restore User","description":"Restore a soft-deleted user.\n\nRequires: users:update permission","operationId":"restore_user_api_admin_users__user_id__restore_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/users/{user_id}/unlock":{"post":{"tags":["Admin - Users"],"summary":"Unlock User Account","description":"Unlock a locked user account.\n\nRequires: users:unlock permission","operationId":"unlock_user_account_api_admin_users__user_id__unlock_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/UnlockRequest"}],"title":"Data"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/users/{user_id}/reset-password":{"post":{"tags":["Admin - Users"],"summary":"Admin Reset Password","description":"Admin set user password directly.\n\nRequires: users:update permission","operationId":"admin_reset_password_api_admin_users__user_id__reset_password_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"new_password","in":"query","required":true,"schema":{"type":"string","title":"New Password"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/users/{user_id}/roles":{"get":{"tags":["Admin - Users"],"summary":"Get User Roles","description":"Get user's role assignments.\n\nRequires: users:read permission","operationId":"get_user_roles_api_admin_users__user_id__roles_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Admin - Users"],"summary":"Assign Role","description":"Assign a role to user.\n\nRequires: users:manage_roles permission","operationId":"assign_role_api_admin_users__user_id__roles_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleAssignRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/users/{user_id}/roles/{role_id}":{"delete":{"tags":["Admin - Users"],"summary":"Revoke Role","description":"Revoke a role from user.\n\nRequires: users:manage_roles permission","operationId":"revoke_role_api_admin_users__user_id__roles__role_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"role_id","in":"path","required":true,"schema":{"type":"integer","title":"Role Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/users/{user_id}/sessions":{"get":{"tags":["Admin - Users"],"summary":"Get User Sessions","description":"Get user's active sessions.\n\nRequires: users:manage_sessions permission","operationId":"get_user_sessions_api_admin_users__user_id__sessions_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Admin - Users"],"summary":"Revoke All User Sessions","description":"Revoke all sessions for a user.\n\nRequires: users:manage_sessions permission","operationId":"revoke_all_user_sessions_api_admin_users__user_id__sessions_delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/users/{user_id}/audit":{"get":{"tags":["Admin - Users"],"summary":"Get User Audit Log","description":"Get audit trail for a user.\n\nRequires: users:view_audit permission","operationId":"get_user_audit_log_api_admin_users__user_id__audit_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/users/stats/overview":{"get":{"tags":["Admin - Users"],"summary":"Get User Stats","description":"Get user statistics overview.\n\nRequires: users:read permission","operationId":"get_user_stats_api_admin_users_stats_overview_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/roles":{"get":{"tags":["Admin - Roles"],"summary":"List Roles","description":"List all roles.\n\nRequires: roles:read permission","operationId":"list_roles_api_admin_roles_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"include_system","in":"query","required":false,"schema":{"type":"boolean","description":"Include system roles","default":true,"title":"Include System"},"description":"Include system roles"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RoleResponse"},"title":"Response List Roles Api Admin Roles Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Admin - Roles"],"summary":"Create Role","description":"Create a new custom role.\n\nRequires: roles:create permission","operationId":"create_role_api_admin_roles_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/roles/permissions":{"get":{"tags":["Admin - Roles"],"summary":"List Available Permissions","description":"List all available permissions.\n\nRequires: roles:read permission","operationId":"list_available_permissions_api_admin_roles_permissions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionListResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/roles/{role_id}":{"get":{"tags":["Admin - Roles"],"summary":"Get Role","description":"Get role details.\n\nRequires: roles:read permission","operationId":"get_role_api_admin_roles__role_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role_id","in":"path","required":true,"schema":{"type":"integer","title":"Role Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Admin - Roles"],"summary":"Update Role","description":"Update a role.\n\nSystem roles can have permissions updated but not renamed.\n\nRequires: roles:update permission","operationId":"update_role_api_admin_roles__role_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role_id","in":"path","required":true,"schema":{"type":"integer","title":"Role Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Admin - Roles"],"summary":"Delete Role","description":"Delete a custom role.\n\nSystem roles cannot be deleted.\n\nRequires: roles:delete permission","operationId":"delete_role_api_admin_roles__role_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role_id","in":"path","required":true,"schema":{"type":"integer","title":"Role Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/roles/{role_id}/users":{"get":{"tags":["Admin - Roles"],"summary":"Get Role Users","description":"Get all users with a specific role.\n\nRequires: roles:read permission","operationId":"get_role_users_api_admin_roles__role_id__users_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role_id","in":"path","required":true,"schema":{"type":"integer","title":"Role Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/roles/seed-system-roles":{"post":{"tags":["Admin - Roles"],"summary":"Seed System Roles","description":"Seed or update system roles from defaults.\n\nRequires: roles:create permission","operationId":"seed_system_roles_api_admin_roles_seed_system_roles_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/dsar":{"get":{"tags":["Admin - DSAR/Compliance"],"summary":"List Dsar Requests","description":"List all DSAR requests with optional filters.\n\nRequires: dsar:admin permission","operationId":"list_dsar_requests_api_admin_dsar_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"request_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by type (export/delete/rectify)","title":"Request Type"},"description":"Filter by type (export/delete/rectify)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DSARListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/dsar/stats":{"get":{"tags":["Admin - DSAR/Compliance"],"summary":"Get Dsar Stats","description":"Get DSAR statistics for dashboard.\n\nRequires: dsar:admin permission","operationId":"get_dsar_stats_api_admin_dsar_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DSARStatsResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/dsar/{request_id}":{"get":{"tags":["Admin - DSAR/Compliance"],"summary":"Get Dsar Request","description":"Get details of a specific DSAR request.\n\nRequires: dsar:admin permission","operationId":"get_dsar_request_api_admin_dsar__request_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"integer","title":"Request Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DSARRequestResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/dsar/{request_id}/cancel":{"post":{"tags":["Admin - DSAR/Compliance"],"summary":"Cancel Dsar Request","description":"Cancel a pending DSAR request.\n\nRequires: dsar:admin permission","operationId":"cancel_dsar_request_api_admin_dsar__request_id__cancel_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"integer","title":"Request Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/dsar/{request_id}/process-export":{"post":{"tags":["Admin - DSAR/Compliance"],"summary":"Process Export Request","description":"Process a DSAR export request and return the data.\n\nRequires: dsar:admin permission","operationId":"process_export_request_api_admin_dsar__request_id__process_export_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"integer","title":"Request Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/dsar/{request_id}/process-deletion":{"post":{"tags":["Admin - DSAR/Compliance"],"summary":"Process Deletion Request","description":"Process a DSAR deletion request (Right to Erasure).\n\nThis will:\n- Revoke all user sessions\n- Delete user addresses\n- Anonymize order records\n- Anonymize user account\n\nRequires: dsar:admin permission","operationId":"process_deletion_request_api_admin_dsar__request_id__process_deletion_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"integer","title":"Request Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProcessDeletionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/dsar/{request_id}/process-rectification":{"post":{"tags":["Admin - DSAR/Compliance"],"summary":"Process Rectification Request","description":"Process a DSAR rectification request (data correction).\n\nRequires: dsar:admin permission","operationId":"process_rectification_request_api_admin_dsar__request_id__process_rectification_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"integer","title":"Request Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RectificationRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/dsar/user/export":{"post":{"tags":["Admin - DSAR/Compliance"],"summary":"Request Data Export","description":"Request a data export (GDPR Article 15).\n\nUser can request export of all their personal data.","operationId":"request_data_export_api_admin_dsar_user_export_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/dsar/user/delete":{"post":{"tags":["Admin - DSAR/Compliance"],"summary":"Request Account Deletion","description":"Request account deletion (GDPR Article 17 - Right to Erasure).\n\nUser can request deletion of their account.\n14-day grace period for cancellation.","operationId":"request_account_deletion_api_admin_dsar_user_delete_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/dsar/user/requests":{"get":{"tags":["Admin - DSAR/Compliance"],"summary":"Get My Dsar Requests","description":"Get current user's DSAR request history.","operationId":"get_my_dsar_requests_api_admin_dsar_user_requests_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/dsar/user/requests/{request_id}/cancel":{"post":{"tags":["Admin - DSAR/Compliance"],"summary":"Cancel My Dsar Request","description":"Cancel user's own pending DSAR request.","operationId":"cancel_my_dsar_request_api_admin_dsar_user_requests__request_id__cancel_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"integer","title":"Request Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/dsar/retention/status":{"get":{"tags":["Admin - DSAR/Compliance"],"summary":"Get Retention Status","description":"Get current data retention status.\n\nRequires: dsar:admin permission","operationId":"get_retention_status_api_admin_dsar_retention_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RetentionStatusResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/dsar/retention/preview":{"get":{"tags":["Admin - DSAR/Compliance"],"summary":"Preview Retention Cleanup","description":"Preview what would be cleaned up by retention policy.\n\nRequires: dsar:admin permission","operationId":"preview_retention_cleanup_api_admin_dsar_retention_preview_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CleanupPreviewResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/dsar/retention/cleanup":{"post":{"tags":["Admin - DSAR/Compliance"],"summary":"Run Retention Cleanup","description":"Execute retention cleanup.\n\nThis will delete expired data according to retention policies.\n\nRequires: dsar:admin permission","operationId":"run_retention_cleanup_api_admin_dsar_retention_cleanup_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CleanupResultResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/newsletter/subscribe":{"post":{"tags":["Newsletter"],"summary":"Subscribe","description":"Subscribe to newsletter.\n\nDouble opt-in flow:\n1. Create pending subscriber\n2. Send confirmation email\n3. User clicks confirmation link\n4. Subscriber becomes confirmed","operationId":"subscribe_api_newsletter_subscribe_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscribeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscribeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/confirm":{"get":{"tags":["Newsletter"],"summary":"Confirm Subscription","description":"Confirm newsletter subscription.\n\nValidates the confirmation token and activates the subscription.","operationId":"confirm_subscription_api_newsletter_confirm_get","parameters":[{"name":"token","in":"query","required":true,"schema":{"type":"string","description":"Confirmation token from email","title":"Token"},"description":"Confirmation token from email"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/unsubscribe":{"get":{"tags":["Newsletter"],"summary":"Unsubscribe Via Link","description":"Unsubscribe via one-click link in email.\n\nUses dedicated unsubscribe token (separate from confirmation token).","operationId":"unsubscribe_via_link_api_newsletter_unsubscribe_get","parameters":[{"name":"token","in":"query","required":true,"schema":{"type":"string","description":"Unsubscribe token from email","title":"Token"},"description":"Unsubscribe token from email"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Newsletter"],"summary":"Unsubscribe Via Form","description":"Unsubscribe via email form.\n\nAlternative to one-click link for users who don't have the token.","operationId":"unsubscribe_via_form_api_newsletter_unsubscribe_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnsubscribeRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/status":{"get":{"tags":["Newsletter"],"summary":"Check Subscription Status","description":"Check subscription status for an email.\n\nNote: Does not reveal if email exists in system for privacy.","operationId":"check_subscription_status_api_newsletter_status_get","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string","format":"email","description":"Email to check","title":"Email"},"description":"Email to check"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/webhooks/sendgrid":{"post":{"tags":["Webhooks"],"summary":"Handle Sendgrid Webhook","description":"Handle SendGrid Event Webhook.\n\nProcesses email delivery events:\n- delivered, open, click\n- bounce, dropped, spam_report\n- unsubscribe\n\nReturns 200 even for processing errors (to prevent retries).","operationId":"handle_sendgrid_webhook_api_webhooks_sendgrid_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/webhooks/sendgrid/verify":{"get":{"tags":["Webhooks"],"summary":"Verify Webhook Setup","description":"Verification endpoint for SendGrid webhook setup.\n\nReturns configuration status for debugging.","operationId":"verify_webhook_setup_api_webhooks_sendgrid_verify_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/admin/data-health/overview":{"get":{"tags":["Admin - Data Health","Data Health Admin"],"summary":"Get Data Health Overview","description":"Get overall data health metrics.\n\nReturns counts, statuses, and recent activity.","operationId":"get_data_health_overview_api_admin_data_health_overview_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Data Health Overview Api Admin Data Health Overview Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/data-health/dlq":{"get":{"tags":["Admin - Data Health","Data Health Admin"],"summary":"Get Dead Letter Queue","description":"Get dead letter queue entries.","operationId":"get_dead_letter_queue_api_admin_data_health_dlq_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"job_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by job type","title":"Job Type"},"description":"Filter by job type"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Dead Letter Queue Api Admin Data Health Dlq Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/data-health/dlq/{dlq_id}/retry":{"post":{"tags":["Admin - Data Health","Data Health Admin"],"summary":"Retry Dlq Entry","description":"Mark a DLQ entry for retry.","operationId":"retry_dlq_entry_api_admin_data_health_dlq__dlq_id__retry_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"dlq_id","in":"path","required":true,"schema":{"type":"integer","title":"Dlq Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Retry Dlq Entry Api Admin Data Health Dlq  Dlq Id  Retry Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/data-health/dlq/{dlq_id}/resolve":{"post":{"tags":["Admin - Data Health","Data Health Admin"],"summary":"Resolve Dlq Entry","description":"Manually resolve a DLQ entry.","operationId":"resolve_dlq_entry_api_admin_data_health_dlq__dlq_id__resolve_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"dlq_id","in":"path","required":true,"schema":{"type":"integer","title":"Dlq Id"}},{"name":"notes","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Resolve Dlq Entry Api Admin Data Health Dlq  Dlq Id  Resolve Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/data-health/quarantine":{"get":{"tags":["Admin - Data Health","Data Health Admin"],"summary":"Get Quarantine Entries","description":"Get quarantined data entries.","operationId":"get_quarantine_entries_api_admin_data_health_quarantine_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"reason","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by quarantine reason","title":"Reason"},"description":"Filter by quarantine reason"},{"name":"entity_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by entity type","title":"Entity Type"},"description":"Filter by entity type"},{"name":"is_resolved","in":"query","required":false,"schema":{"type":"boolean","description":"Include resolved entries","default":false,"title":"Is Resolved"},"description":"Include resolved entries"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Quarantine Entries Api Admin Data Health Quarantine Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/data-health/quarantine/{quarantine_id}/resolve":{"post":{"tags":["Admin - Data Health","Data Health Admin"],"summary":"Resolve Quarantine Entry","description":"Resolve a quarantined data entry.","operationId":"resolve_quarantine_entry_api_admin_data_health_quarantine__quarantine_id__resolve_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"quarantine_id","in":"path","required":true,"schema":{"type":"integer","title":"Quarantine Id"}},{"name":"action","in":"query","required":true,"schema":{"type":"string","description":"Resolution action: accept, reject, merge, manual_edit","title":"Action"},"description":"Resolution action: accept, reject, merge, manual_edit"},{"name":"notes","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Resolve Quarantine Entry Api Admin Data Health Quarantine  Quarantine Id  Resolve Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/data-health/pipeline/jobs":{"get":{"tags":["Admin - Data Health","Data Health Admin"],"summary":"Get Pipeline Jobs","description":"Get all pipeline job checkpoints.","operationId":"get_pipeline_jobs_api_admin_data_health_pipeline_jobs_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Pipeline Jobs Api Admin Data Health Pipeline Jobs Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/data-health/pipeline/jobs/{job_name}/reset":{"post":{"tags":["Admin - Data Health","Data Health Admin"],"summary":"Reset Pipeline Job","description":"Reset a pipeline job checkpoint.","operationId":"reset_pipeline_job_api_admin_data_health_pipeline_jobs__job_name__reset_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"job_name","in":"path","required":true,"schema":{"type":"string","title":"Job Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Reset Pipeline Job Api Admin Data Health Pipeline Jobs  Job Name  Reset Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/data-health/changelog":{"get":{"tags":["Admin - Data Health","Data Health Admin"],"summary":"Get Changelog","description":"Get recent change history.","operationId":"get_changelog_api_admin_data_health_changelog_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"entity_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by entity type","title":"Entity Type"},"description":"Filter by entity type"},{"name":"data_source","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by data source","title":"Data Source"},"description":"Filter by data source"},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"description":"Number of days to look back","default":7,"title":"Days"},"description":"Number of days to look back"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Changelog Api Admin Data Health Changelog Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/data-health/changelog/summary":{"get":{"tags":["Admin - Data Health","Data Health Admin"],"summary":"Get Changelog Summary","description":"Get summary statistics for recent changes.","operationId":"get_changelog_summary_api_admin_data_health_changelog_summary_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"default":7,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Changelog Summary Api Admin Data Health Changelog Summary Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/data-health/adapters":{"get":{"tags":["Admin - Data Health","Data Health Admin"],"summary":"Get Adapter Status","description":"Get status of all data source adapters.","operationId":"get_adapter_status_api_admin_data_health_adapters_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Adapter Status Api Admin Data Health Adapters Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/data-health/adapters/{adapter_name}/enable":{"post":{"tags":["Admin - Data Health","Data Health Admin"],"summary":"Enable Adapter","description":"Enable a data source adapter.","operationId":"enable_adapter_api_admin_data_health_adapters__adapter_name__enable_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"adapter_name","in":"path","required":true,"schema":{"type":"string","title":"Adapter Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Enable Adapter Api Admin Data Health Adapters  Adapter Name  Enable Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/data-health/adapters/{adapter_name}/disable":{"post":{"tags":["Admin - Data Health","Data Health Admin"],"summary":"Disable Adapter","description":"Disable a data source adapter.","operationId":"disable_adapter_api_admin_data_health_adapters__adapter_name__disable_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"adapter_name","in":"path","required":true,"schema":{"type":"string","title":"Adapter Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Disable Adapter Api Admin Data Health Adapters  Adapter Name  Disable Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/data-health/adapters/health-check":{"post":{"tags":["Admin - Data Health","Data Health Admin"],"summary":"Run Adapter Health Checks","description":"Run health checks on all adapters.","operationId":"run_adapter_health_checks_api_admin_data_health_adapters_health_check_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Run Adapter Health Checks Api Admin Data Health Adapters Health Check Post"}}}}},"security":[{"HTTPBearer":[]}]}},"/":{"get":{"tags":["Health"],"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/config":{"get":{"tags":["Config"],"summary":"Get Config","description":"P3-12: Public configuration endpoint for frontend feature flags.\nReturns non-sensitive configuration values.","operationId":"get_config_api_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"P2-8: Enhanced health check with actual DB ping and cleanup heartbeat.\nReturns 503 if database is unreachable.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health/detailed":{"get":{"tags":["Health"],"summary":"Detailed Health Check","description":"Detailed health check with pool statistics.\nUseful for debugging connection issues.","operationId":"detailed_health_check_health_detailed_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/metrics":{"get":{"tags":["Health"],"summary":"Prometheus Metrics","description":"P2-5: Prometheus-compatible metrics endpoint.\n\nReturns application metrics in text format for monitoring systems.\nIncludes request latency, error rates, and database pool stats.","operationId":"prometheus_metrics_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/metrics/json":{"get":{"tags":["Health"],"summary":"Json Metrics","description":"P2-5: JSON metrics endpoint for dashboards.\n\nReturns all collected metrics in JSON format for easier integration\nwith custom dashboards or alerting systems.","operationId":"json_metrics_metrics_json_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health/backup":{"get":{"tags":["Health"],"summary":"Backup Status","description":"P2-3: Database backup status and configuration.\n\nReturns current backup configuration, most recent backup info,\nand Railway managed backup details.\n\nNote: Railway PostgreSQL includes automatic point-in-time recovery.","operationId":"backup_status_health_backup_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health/backup/restore-guide":{"get":{"tags":["Health"],"summary":"Restore Guide","description":"P2-3: Database restore instructions.\n\nReturns step-by-step instructions for restoring from various backup sources.","operationId":"restore_guide_health_backup_restore_guide_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AddressCreate":{"properties":{"recipient_name":{"type":"string","maxLength":100,"minLength":1,"title":"Recipient Name"},"company_name":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Company Name"},"address_line1":{"type":"string","maxLength":100,"minLength":1,"title":"Address Line1"},"address_line2":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Address Line2"},"address_line3":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Address Line3"},"city":{"type":"string","maxLength":100,"minLength":1,"title":"City"},"state_province":{"type":"string","maxLength":50,"minLength":2,"title":"State Province"},"postal_code":{"type":"string","maxLength":20,"minLength":3,"title":"Postal Code"},"country_code":{"type":"string","maxLength":2,"minLength":2,"title":"Country Code","default":"US"},"phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Email"},"residential":{"type":"boolean","title":"Residential","default":true},"validate_address":{"type":"boolean","title":"Validate Address","default":true},"address_type":{"type":"string","title":"Address Type","default":"shipping"}},"type":"object","required":["recipient_name","address_line1","city","state_province","postal_code"],"title":"AddressCreate","description":"Create a new address."},"AddressResponse":{"properties":{"id":{"type":"integer","title":"Id"},"address_type":{"type":"string","title":"Address Type"},"recipient_name_masked":{"type":"string","title":"Recipient Name Masked","description":"First initial + ***"},"company_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Name"},"address_line1_masked":{"type":"string","title":"Address Line1 Masked","description":"Street number + ***"},"city":{"type":"string","title":"City"},"state_province":{"type":"string","title":"State Province"},"postal_code":{"type":"string","title":"Postal Code"},"country_code":{"type":"string","title":"Country Code"},"residential":{"type":"boolean","title":"Residential"},"validation_status":{"type":"string","title":"Validation Status"},"validated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Validated At"},"is_default":{"type":"boolean","title":"Is Default","default":false},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","address_type","recipient_name_masked","address_line1_masked","city","state_province","postal_code","country_code","residential","validation_status","created_at"],"title":"AddressResponse","description":"Address response (PII masked)."},"AddressValidationResponse":{"properties":{"is_valid":{"type":"boolean","title":"Is Valid"},"original_address":{"type":"object","title":"Original Address"},"corrected_address":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Corrected Address"},"messages":{"items":{"type":"string"},"type":"array","title":"Messages","default":[]},"validation_status":{"type":"string","title":"Validation Status"}},"type":"object","required":["is_valid","original_address","validation_status"],"title":"AddressValidationResponse","description":"Address validation result."},"AdminSetupRequest":{"properties":{"email":{"type":"string","title":"Email"},"secret":{"type":"string","title":"Secret"}},"type":"object","required":["email","secret"],"title":"AdminSetupRequest"},"AuthResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"refresh_token":{"type":"string","title":"Refresh Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"csrf_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Csrf Token"}},"type":"object","required":["access_token","refresh_token"],"title":"AuthResponse","description":"P1-5: Auth response with optional tokens.\n\nFor cookie-based auth, tokens are set as HttpOnly cookies.\naccess_token/refresh_token are still returned for backwards compatibility\nwith mobile apps and API clients that prefer header-based auth."},"BarcodeInput":{"properties":{"barcode":{"type":"string","maxLength":50,"minLength":8,"title":"Barcode"},"barcode_type":{"type":"string","pattern":"^(UPC|ISBN|EAN)$","title":"Barcode Type","default":"UPC"},"scanned_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scanned At"}},"type":"object","required":["barcode"],"title":"BarcodeInput"},"BarcodeQueueRequest":{"properties":{"barcodes":{"items":{"$ref":"#/components/schemas/BarcodeInput"},"type":"array","title":"Barcodes"}},"type":"object","required":["barcodes"],"title":"BarcodeQueueRequest"},"BatchProcessRequest":{"properties":{"ids":{"items":{"type":"integer"},"type":"array","title":"Ids"},"action":{"type":"string","pattern":"^(create_products|add_all|skip_all)$","title":"Action"},"default_stock":{"type":"integer","minimum":1.0,"title":"Default Stock","default":1}},"type":"object","required":["ids","action"],"title":"BatchProcessRequest"},"Body_estimate_from_upload_api_grading_estimate_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_estimate_from_upload_api_grading_estimate_upload_post"},"Body_search_by_image_api_comics_search_by_image_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_search_by_image_api_comics_search_by_image_post"},"CartItem":{"properties":{"product_id":{"type":"integer","title":"Product Id"},"category":{"type":"string","title":"Category"},"price":{"type":"number","title":"Price"},"quantity":{"type":"integer","title":"Quantity"}},"type":"object","required":["product_id","category","price","quantity"],"title":"CartItem"},"CartItemCreate":{"properties":{"product_id":{"type":"integer","title":"Product Id"},"quantity":{"type":"integer","title":"Quantity","default":1}},"type":"object","required":["product_id"],"title":"CartItemCreate"},"CartItemResponse":{"properties":{"id":{"type":"integer","title":"Id"},"product":{"$ref":"#/components/schemas/ProductResponse"},"quantity":{"type":"integer","title":"Quantity"}},"type":"object","required":["id","product","quantity"],"title":"CartItemResponse"},"CartItemUpdate":{"properties":{"quantity":{"type":"integer","title":"Quantity"}},"type":"object","required":["quantity"],"title":"CartItemUpdate"},"CartResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/CartItemResponse"},"type":"array","title":"Items"},"subtotal":{"type":"number","title":"Subtotal"},"item_count":{"type":"integer","title":"Item Count"}},"type":"object","required":["items","subtotal","item_count"],"title":"CartResponse"},"CheckoutItem":{"properties":{"product_id":{"type":"integer","title":"Product Id"},"quantity":{"type":"integer","title":"Quantity"}},"type":"object","required":["product_id","quantity"],"title":"CheckoutItem"},"CleanupPreviewResponse":{"properties":{"preview":{"additionalProperties":{"type":"integer"},"type":"object","title":"Preview"}},"type":"object","required":["preview"],"title":"CleanupPreviewResponse","description":"Cleanup preview response."},"CleanupResultResponse":{"properties":{"results":{"additionalProperties":{"type":"integer"},"type":"object","title":"Results"},"total_cleaned":{"type":"integer","title":"Total Cleaned"}},"type":"object","required":["results","total_cleaned"],"title":"CleanupResultResponse","description":"Cleanup execution result."},"ConfirmOrderRequest":{"properties":{"payment_intent_id":{"type":"string","title":"Payment Intent Id"},"items":{"items":{"$ref":"#/components/schemas/CheckoutItem"},"type":"array","title":"Items"}},"type":"object","required":["payment_intent_id","items"],"title":"ConfirmOrderRequest"},"ContactFormRequest":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name","description":"Sender's name","examples":["John Doe"]},"email":{"type":"string","format":"email","title":"Email","description":"Sender's email address","examples":["john@example.com"]},"subject":{"allOf":[{"$ref":"#/components/schemas/ContactSubject"}],"description":"Contact subject category","examples":["general"]},"message":{"type":"string","maxLength":2000,"minLength":10,"title":"Message","description":"Contact message content","examples":["I have a question about my recent order..."]}},"type":"object","required":["name","email","subject","message"],"title":"ContactFormRequest","description":"Contact form request schema.\n\nValidation rules per IMPL-001:\n- name: 1-100 characters\n- email: valid email format\n- subject: enum value\n- message: 10-2000 characters"},"ContactFormResponse":{"properties":{"message":{"type":"string","title":"Message","default":"Contact form submitted successfully"},"reference_id":{"type":"string","title":"Reference Id","description":"Reference ID for tracking (not stored, for user reference only)"}},"type":"object","required":["reference_id"],"title":"ContactFormResponse","description":"Response for successful contact form submission."},"ContactSubject":{"type":"string","enum":["general","order","returns","wholesale","other"],"title":"ContactSubject","description":"Valid contact form subjects."},"CouponListResponse":{"properties":{"id":{"type":"integer","title":"Id"},"code":{"type":"string","title":"Code"},"name":{"type":"string","title":"Name"},"discount_type":{"type":"string","title":"Discount Type"},"discount_value":{"type":"number","title":"Discount Value"},"usage_count":{"type":"integer","title":"Usage Count"},"is_active":{"type":"boolean","title":"Is Active"},"expires_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expires At"}},"type":"object","required":["id","code","name","discount_type","discount_value","usage_count","is_active"],"title":"CouponListResponse"},"CouponResponse":{"properties":{"valid":{"type":"boolean","title":"Valid"},"code":{"type":"string","title":"Code"},"discount_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Discount Type"},"discount_value":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Discount Value"},"discount_amount":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Discount Amount"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["valid","code"],"title":"CouponResponse"},"CreateCouponRequest":{"properties":{"code":{"type":"string","title":"Code"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"discount_type":{"type":"string","title":"Discount Type"},"discount_value":{"type":"number","title":"Discount Value"},"minimum_order_value":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Minimum Order Value"},"maximum_discount":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Maximum Discount"},"applies_to":{"type":"string","title":"Applies To","default":"all"},"applicable_categories":{"items":{"type":"string"},"type":"array","title":"Applicable Categories"},"applicable_product_ids":{"items":{"type":"integer"},"type":"array","title":"Applicable Product Ids"},"excluded_product_ids":{"items":{"type":"integer"},"type":"array","title":"Excluded Product Ids"},"usage_limit_total":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Usage Limit Total"},"usage_limit_per_user":{"type":"integer","title":"Usage Limit Per User","default":1},"first_order_only":{"type":"boolean","title":"First Order Only","default":false},"registered_users_only":{"type":"boolean","title":"Registered Users Only","default":false},"starts_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Starts At"},"expires_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expires At"}},"type":"object","required":["code","name","discount_type","discount_value"],"title":"CreateCouponRequest"},"DSARListResponse":{"properties":{"requests":{"items":{"$ref":"#/components/schemas/DSARRequestResponse"},"type":"array","title":"Requests"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["requests","total"],"title":"DSARListResponse","description":"List of DSAR requests."},"DSARRequestResponse":{"properties":{"id":{"type":"integer","title":"Id"},"user_id":{"type":"integer","title":"User Id"},"request_type":{"type":"string","title":"Request Type"},"status":{"type":"string","title":"Status"},"requested_at":{"type":"string","title":"Requested At"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"},"processed_by":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Processed By"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"ledger_tx_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ledger Tx Id"}},"type":"object","required":["id","user_id","request_type","status","requested_at","completed_at","processed_by","notes","ledger_tx_id"],"title":"DSARRequestResponse","description":"DSAR request response."},"DSARStatsResponse":{"properties":{"by_status":{"additionalProperties":{"type":"integer"},"type":"object","title":"By Status"},"by_type":{"additionalProperties":{"type":"integer"},"type":"object","title":"By Type"},"pending_count":{"type":"integer","title":"Pending Count"},"avg_processing_hours":{"type":"number","title":"Avg Processing Hours"},"compliance_deadline_days":{"type":"integer","title":"Compliance Deadline Days"}},"type":"object","required":["by_status","by_type","pending_count","avg_processing_hours","compliance_deadline_days"],"title":"DSARStatsResponse","description":"DSAR statistics."},"EmailVerificationConfirm":{"properties":{"token":{"type":"string","title":"Token"}},"type":"object","required":["token"],"title":"EmailVerificationConfirm","description":"Complete email verification."},"EventBatch":{"properties":{"session_id":{"type":"string","title":"Session Id"},"events":{"items":{"type":"object"},"type":"array","title":"Events"},"context":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Context"}},"type":"object","required":["session_id","events"],"title":"EventBatch","description":"Batch of events to ingest."},"FunkoResponse":{"properties":{"id":{"type":"integer","title":"Id"},"handle":{"type":"string","title":"Handle"},"title":{"type":"string","title":"Title"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"license":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"License"},"product_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Type"},"box_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Box Number"},"funko_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Funko Url"},"series":{"items":{"$ref":"#/components/schemas/FunkoSeriesResponse"},"type":"array","title":"Series"}},"type":"object","required":["id","handle","title","image_url","category","license","product_type","box_number","funko_url","series"],"title":"FunkoResponse"},"FunkoSearchResponse":{"properties":{"results":{"items":{"$ref":"#/components/schemas/FunkoResponse"},"type":"array","title":"Results"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"pages":{"type":"integer","title":"Pages"}},"type":"object","required":["results","total","page","pages"],"title":"FunkoSearchResponse"},"FunkoSeriesResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"}},"type":"object","required":["id","name"],"title":"FunkoSeriesResponse"},"GradeEstimate":{"properties":{"grade":{"type":"number","title":"Grade"},"confidence":{"type":"number","title":"Confidence"},"grade_label":{"type":"string","title":"Grade Label"},"factors":{"additionalProperties":{"type":"number"},"type":"object","title":"Factors"}},"type":"object","required":["grade","confidence","grade_label","factors"],"title":"GradeEstimate","description":"Quick grade estimate for display"},"GradeRequest":{"properties":{"image_url":{"type":"string","title":"Image Url"},"additional_images":{"items":{"type":"string"},"type":"array","title":"Additional Images","default":[]}},"type":"object","required":["image_url"],"title":"GradeRequest","description":"Request for AI grade estimation"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"IdentifyPayload":{"properties":{"session_id":{"type":"string","title":"Session Id"}},"type":"object","required":["session_id"],"title":"IdentifyPayload","description":"User identification payload."},"LabelResponse":{"properties":{"shipment_id":{"type":"integer","title":"Shipment Id"},"tracking_number":{"type":"string","title":"Tracking Number"},"label_format":{"type":"string","title":"Label Format"},"label_data":{"type":"string","title":"Label Data"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["shipment_id","tracking_number","label_format","label_data","created_at"],"title":"LabelResponse","description":"Shipping label data."},"OrderCreate":{"properties":{"shipping_address":{"$ref":"#/components/schemas/ShippingAddress"},"shipping_method":{"type":"string","title":"Shipping Method","default":"standard"},"payment_method":{"type":"string","title":"Payment Method"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","required":["shipping_address","payment_method"],"title":"OrderCreate"},"OrderItemResponse":{"properties":{"id":{"type":"integer","title":"Id"},"product_id":{"type":"integer","title":"Product Id"},"product_name":{"type":"string","title":"Product Name"},"product_sku":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Sku"},"price":{"type":"number","title":"Price"},"quantity":{"type":"integer","title":"Quantity"}},"type":"object","required":["id","product_id","product_name","product_sku","price","quantity"],"title":"OrderItemResponse"},"OrderList":{"properties":{"orders":{"items":{"$ref":"#/components/schemas/OrderResponse"},"type":"array","title":"Orders"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["orders","total"],"title":"OrderList"},"OrderResponse":{"properties":{"id":{"type":"integer","title":"Id"},"order_number":{"type":"string","title":"Order Number"},"status":{"type":"string","title":"Status"},"subtotal":{"type":"number","title":"Subtotal"},"shipping_cost":{"type":"number","title":"Shipping Cost"},"tax":{"type":"number","title":"Tax"},"total":{"type":"number","title":"Total"},"shipping_address":{"type":"object","title":"Shipping Address"},"shipping_method":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shipping Method"},"tracking_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tracking Number"},"items":{"items":{"$ref":"#/components/schemas/OrderItemResponse"},"type":"array","title":"Items"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"paid_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Paid At"},"shipped_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Shipped At"}},"type":"object","required":["id","order_number","status","subtotal","shipping_cost","tax","total","shipping_address","shipping_method","tracking_number","items","created_at","paid_at","shipped_at"],"title":"OrderResponse"},"PackageInfo":{"properties":{"weight":{"type":"number","maximum":150.0,"exclusiveMinimum":0.0,"title":"Weight","description":"Weight in LBS"},"weight_unit":{"type":"string","title":"Weight Unit","default":"LBS"},"length":{"anyOf":[{"type":"number","maximum":108.0,"exclusiveMinimum":0.0},{"type":"null"}],"title":"Length","description":"Length in inches"},"width":{"anyOf":[{"type":"number","maximum":108.0,"exclusiveMinimum":0.0},{"type":"null"}],"title":"Width","description":"Width in inches"},"height":{"anyOf":[{"type":"number","maximum":108.0,"exclusiveMinimum":0.0},{"type":"null"}],"title":"Height","description":"Height in inches"},"dimension_unit":{"type":"string","title":"Dimension Unit","default":"IN"},"package_type":{"type":"string","title":"Package Type","description":"UPS package type code","default":"02"},"declared_value":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Declared Value","description":"Declared value for insurance"}},"type":"object","required":["weight"],"title":"PackageInfo","description":"Package details for rate quoting and shipping."},"PasswordChange":{"properties":{"current_password":{"type":"string","title":"Current Password"},"new_password":{"type":"string","title":"New Password"}},"type":"object","required":["current_password","new_password"],"title":"PasswordChange","description":"Change password (requires current password)."},"PasswordResetConfirm":{"properties":{"token":{"type":"string","title":"Token"},"new_password":{"type":"string","title":"New Password"}},"type":"object","required":["token","new_password"],"title":"PasswordResetConfirm","description":"Complete password reset with token."},"PasswordResetRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"}},"type":"object","required":["email"],"title":"PasswordResetRequest","description":"Request password reset."},"PasswordStrengthResponse":{"properties":{"score":{"type":"integer","title":"Score"},"label":{"type":"string","title":"Label"},"requirements":{"type":"string","title":"Requirements"}},"type":"object","required":["score","label","requirements"],"title":"PasswordStrengthResponse","description":"Password strength check response."},"PaymentIntentRequest":{"properties":{"items":{"items":{"$ref":"#/components/schemas/CheckoutItem"},"type":"array","title":"Items"}},"type":"object","required":["items"],"title":"PaymentIntentRequest"},"PermissionListResponse":{"properties":{"permissions":{"items":{"type":"object"},"type":"array","title":"Permissions"}},"type":"object","required":["permissions"],"title":"PermissionListResponse","description":"List of available permissions."},"ProcessDeletionResponse":{"properties":{"request_id":{"type":"integer","title":"Request Id"},"user_id":{"type":"integer","title":"User Id"},"pre_hash":{"type":"string","title":"Pre Hash"},"post_hash":{"type":"string","title":"Post Hash"},"ledger_tx_id":{"type":"string","title":"Ledger Tx Id"},"completed_at":{"type":"string","title":"Completed At"}},"type":"object","required":["request_id","user_id","pre_hash","post_hash","ledger_tx_id","completed_at"],"title":"ProcessDeletionResponse","description":"Deletion processing result."},"ProductCreate":{"properties":{"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category":{"type":"string","title":"Category"},"subcategory":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subcategory"},"price":{"type":"number","title":"Price"},"original_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Original Price"},"sku":{"type":"string","title":"Sku"},"stock":{"type":"integer","title":"Stock","default":0},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"images":{"items":{"type":"string"},"type":"array","title":"Images","default":[]},"tags":{"items":{"type":"string"},"type":"array","title":"Tags","default":[]},"featured":{"type":"boolean","title":"Featured","default":false},"issue_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Issue Number"},"publisher":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Publisher"},"year":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year"},"artist":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Artist"},"writer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Writer"},"cgc_grade":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cgc Grade"},"is_graded":{"type":"boolean","title":"Is Graded","default":false}},"type":"object","required":["name","category","price","sku"],"title":"ProductCreate"},"ProductList":{"properties":{"products":{"items":{"$ref":"#/components/schemas/ProductResponse"},"type":"array","title":"Products"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"per_page":{"type":"integer","title":"Per Page"}},"type":"object","required":["products","total","page","per_page"],"title":"ProductList"},"ProductResponse":{"properties":{"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category":{"type":"string","title":"Category"},"subcategory":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subcategory"},"price":{"type":"number","title":"Price"},"original_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Original Price"},"id":{"type":"integer","title":"Id"},"sku":{"type":"string","title":"Sku"},"stock":{"type":"integer","title":"Stock"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"images":{"items":{"type":"string"},"type":"array","title":"Images"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags"},"featured":{"type":"boolean","title":"Featured"},"rating":{"type":"number","title":"Rating"},"review_count":{"type":"integer","title":"Review Count"},"issue_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Issue Number"},"publisher":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Publisher"},"year":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year"},"cgc_grade":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cgc Grade"},"estimated_grade":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Grade"},"grade_confidence":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Grade Confidence"},"is_graded":{"type":"boolean","title":"Is Graded"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["name","category","price","id","sku","stock","image_url","images","tags","featured","rating","review_count","issue_number","publisher","year","cgc_grade","estimated_grade","grade_confidence","is_graded","created_at"],"title":"ProductResponse"},"ProductUpdate":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"subcategory":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subcategory"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"original_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Original Price"},"stock":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Stock"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"images":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Images"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags"},"featured":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Featured"},"cgc_grade":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cgc Grade"},"estimated_grade":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Grade"},"is_graded":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Graded"}},"type":"object","title":"ProductUpdate"},"ProductUpdateRequest":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"original_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Original Price"},"stock":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Stock"},"bin_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bin Id"},"upc":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Upc"},"isbn":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Isbn"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"type":"object","title":"ProductUpdateRequest"},"PromoteRequest":{"properties":{"email":{"type":"string","title":"Email"}},"type":"object","required":["email"],"title":"PromoteRequest"},"QueueProcessRequest":{"properties":{"action":{"type":"string","pattern":"^(create_product|add_to_existing|skip)$","title":"Action"},"product_data":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Product Data"}},"type":"object","required":["action"],"title":"QueueProcessRequest"},"RateListResponse":{"properties":{"rates":{"items":{"$ref":"#/components/schemas/RateResponse"},"type":"array","title":"Rates"},"destination_postal_code":{"type":"string","title":"Destination Postal Code"},"destination_country":{"type":"string","title":"Destination Country"}},"type":"object","required":["rates","destination_postal_code","destination_country"],"title":"RateListResponse","description":"List of available shipping rates."},"RateRequest":{"properties":{"destination_address_id":{"type":"integer","title":"Destination Address Id"},"packages":{"anyOf":[{"items":{"$ref":"#/components/schemas/PackageInfo"},"type":"array"},{"type":"null"}],"title":"Packages"},"order_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Order Id"},"service_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Code","description":"Specific UPS service code (optional)"}},"type":"object","required":["destination_address_id"],"title":"RateRequest","description":"Request shipping rates."},"RateResponse":{"properties":{"quote_id":{"type":"string","title":"Quote Id"},"service_code":{"type":"string","title":"Service Code"},"service_name":{"type":"string","title":"Service Name"},"total_rate":{"type":"number","title":"Total Rate"},"estimated_delivery_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Estimated Delivery Date"},"estimated_transit_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Estimated Transit Days"},"guaranteed_delivery":{"type":"boolean","title":"Guaranteed Delivery","default":false},"expires_at":{"type":"string","format":"date-time","title":"Expires At"}},"type":"object","required":["quote_id","service_code","service_name","total_rate","expires_at"],"title":"RateResponse","description":"A single shipping rate option."},"RectificationRequest":{"properties":{"corrections":{"type":"object","title":"Corrections"}},"type":"object","required":["corrections"],"title":"RectificationRequest","description":"Rectification corrections."},"RefreshToken":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshToken"},"RetentionStatusResponse":{"properties":{"status":{"additionalProperties":{"type":"object"},"type":"object","title":"Status"}},"type":"object","required":["status"],"title":"RetentionStatusResponse","description":"Retention status response."},"RoleAssignRequest":{"properties":{"role_id":{"type":"integer","title":"Role Id"},"expires_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Expires At"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","required":["role_id"],"title":"RoleAssignRequest","description":"Assign role to user."},"RoleCreateRequest":{"properties":{"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"permissions":{"items":{"type":"string"},"type":"array","title":"Permissions","default":[]}},"type":"object","required":["name"],"title":"RoleCreateRequest","description":"Create role request."},"RoleResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"permissions":{"items":{"type":"string"},"type":"array","title":"Permissions"},"is_system":{"type":"boolean","title":"Is System"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"}},"type":"object","required":["id","name","description","permissions","is_system","created_at","updated_at"],"title":"RoleResponse","description":"Role details."},"RoleUpdateRequest":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"permissions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Permissions"}},"type":"object","title":"RoleUpdateRequest","description":"Update role request."},"SelectRateRequest":{"properties":{"quote_id":{"type":"string","title":"Quote Id"}},"type":"object","required":["quote_id"],"title":"SelectRateRequest","description":"Select a rate quote."},"SeriesSearchResponse":{"properties":{"results":{"items":{"$ref":"#/components/schemas/FunkoSeriesResponse"},"type":"array","title":"Results"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["results","total"],"title":"SeriesSearchResponse"},"ShipmentCreate":{"properties":{"order_id":{"type":"integer","title":"Order Id"},"destination_address_id":{"type":"integer","title":"Destination Address Id"},"service_code":{"type":"string","title":"Service Code"},"packages":{"anyOf":[{"items":{"$ref":"#/components/schemas/PackageInfo"},"type":"array"},{"type":"null"}],"title":"Packages"},"signature_required":{"type":"boolean","title":"Signature Required","default":false},"declared_value":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Declared Value"},"label_format":{"type":"string","pattern":"^(ZPL|GIF|PNG|EPL)$","title":"Label Format","default":"ZPL"}},"type":"object","required":["order_id","destination_address_id","service_code"],"title":"ShipmentCreate","description":"Create a shipment (generate label)."},"ShipmentListResponse":{"properties":{"shipments":{"items":{"$ref":"#/components/schemas/ShipmentResponse"},"type":"array","title":"Shipments"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["shipments","total"],"title":"ShipmentListResponse","description":"List of shipments."},"ShipmentResponse":{"properties":{"id":{"type":"integer","title":"Id"},"order_id":{"type":"integer","title":"Order Id"},"tracking_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tracking Number"},"tracking_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tracking Url"},"service_code":{"type":"string","title":"Service Code"},"service_name":{"type":"string","title":"Service Name"},"status":{"type":"string","title":"Status"},"status_detail":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status Detail"},"weight":{"type":"number","title":"Weight"},"package_count":{"type":"integer","title":"Package Count"},"shipping_cost":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Shipping Cost"},"carrier_cost":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Carrier Cost"},"label_format":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Label Format"},"has_label":{"type":"boolean","title":"Has Label","default":false},"signature_required":{"type":"boolean","title":"Signature Required","default":false},"actual_delivery_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Actual Delivery Date"},"estimated_delivery_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Estimated Delivery Date"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"shipped_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Shipped At"},"last_tracking_update":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Tracking Update"},"tracking_events":{"anyOf":[{"items":{"$ref":"#/components/schemas/TrackingEventResponse"},"type":"array"},{"type":"null"}],"title":"Tracking Events"}},"type":"object","required":["id","order_id","service_code","service_name","status","weight","package_count","created_at"],"title":"ShipmentResponse","description":"Shipment details."},"ShippingAddress":{"properties":{"name":{"type":"string","title":"Name"},"street":{"type":"string","title":"Street"},"city":{"type":"string","title":"City"},"state":{"type":"string","title":"State"},"zip_code":{"type":"string","title":"Zip Code"},"country":{"type":"string","title":"Country","default":"US"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"}},"type":"object","required":["name","street","city","state","zip_code"],"title":"ShippingAddress"},"StockAdjustmentRequest":{"properties":{"quantity":{"type":"integer","title":"Quantity"},"movement_type":{"type":"string","pattern":"^(adjustment|damaged|returned|transfer)$","title":"Movement Type","default":"adjustment"},"reason":{"type":"string","maxLength":255,"minLength":3,"title":"Reason"}},"type":"object","required":["quantity","reason"],"title":"StockAdjustmentRequest"},"SubscribeRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"content_types":{"items":{"type":"string"},"type":"array","title":"Content Types","default":["newsletter","price_alerts"]}},"type":"object","required":["email"],"title":"SubscribeRequest"},"SubscribeResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"requires_confirmation":{"type":"boolean","title":"Requires Confirmation","default":true}},"type":"object","required":["success","message"],"title":"SubscribeResponse"},"TrackingEventResponse":{"properties":{"event_type":{"type":"string","title":"Event Type"},"description":{"type":"string","title":"Description"},"event_time":{"type":"string","format":"date-time","title":"Event Time"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"state_province":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State Province"},"postal_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Postal Code"},"country_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country Code"}},"type":"object","required":["event_type","description","event_time"],"title":"TrackingEventResponse","description":"A single tracking event."},"TrackingResponse":{"properties":{"shipment_id":{"type":"integer","title":"Shipment Id"},"tracking_number":{"type":"string","title":"Tracking Number"},"status":{"type":"string","title":"Status"},"status_detail":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status Detail"},"delivered":{"type":"boolean","title":"Delivered","default":false},"delivery_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Delivery Date"},"estimated_delivery":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Estimated Delivery"},"signature":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Signature"},"events":{"items":{"$ref":"#/components/schemas/TrackingEventResponse"},"type":"array","title":"Events","default":[]}},"type":"object","required":["shipment_id","tracking_number","status"],"title":"TrackingResponse","description":"Complete tracking information."},"UnlockRequest":{"properties":{"reset_lockout_count":{"type":"boolean","title":"Reset Lockout Count","default":true}},"type":"object","title":"UnlockRequest","description":"Unlock account request."},"UnsubscribeRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"}},"type":"object","required":["email"],"title":"UnsubscribeRequest"},"UserCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"name":{"type":"string","title":"Name"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","name","password"],"title":"UserCreate"},"UserDetailResponse":{"properties":{"id":{"type":"integer","title":"Id"},"email":{"type":"string","title":"Email"},"name":{"type":"string","title":"Name"},"is_active":{"type":"boolean","title":"Is Active"},"is_admin":{"type":"boolean","title":"Is Admin"},"is_email_verified":{"type":"boolean","title":"Is Email Verified"},"is_locked":{"type":"boolean","title":"Is Locked"},"roles":{"items":{"type":"string"},"type":"array","title":"Roles"},"permissions":{"items":{"type":"string"},"type":"array","title":"Permissions"},"created_at":{"type":"string","title":"Created At"},"last_login_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Login At"},"lockout_count":{"type":"integer","title":"Lockout Count"},"failed_login_attempts":{"type":"integer","title":"Failed Login Attempts"}},"type":"object","required":["id","email","name","is_active","is_admin","is_email_verified","is_locked","roles","permissions","created_at","last_login_at","lockout_count","failed_login_attempts"],"title":"UserDetailResponse","description":"Detailed user info for admin."},"UserListResponse":{"properties":{"users":{"items":{"type":"object"},"type":"array","title":"Users"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"per_page":{"type":"integer","title":"Per Page"}},"type":"object","required":["users","total","page","per_page"],"title":"UserListResponse","description":"Paginated user list."},"UserLogin":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"UserLogin"},"UserResponse":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"name":{"type":"string","title":"Name"},"id":{"type":"integer","title":"Id"},"is_active":{"type":"boolean","title":"Is Active"},"is_admin":{"type":"boolean","title":"Is Admin"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["email","name","id","is_active","is_admin","created_at"],"title":"UserResponse"},"UserUpdate":{"properties":{"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"password":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Password"}},"type":"object","title":"UserUpdate"},"ValidateCouponRequest":{"properties":{"code":{"type":"string","title":"Code"},"cart_items":{"items":{"$ref":"#/components/schemas/CartItem"},"type":"array","title":"Cart Items"},"cart_total":{"type":"number","title":"Cart Total"}},"type":"object","required":["code","cart_items","cart_total"],"title":"ValidateCouponRequest"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VitalsPayload":{"properties":{"session_id":{"type":"string","title":"Session Id"},"route":{"type":"string","title":"Route"},"page_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Page Url"},"lcp":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Lcp"},"lcp_element":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lcp Element"},"fid":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Fid"},"fid_event":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Fid Event"},"cls":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cls"},"inp":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Inp"},"ttfb":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Ttfb"},"dns":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Dns"},"tcp":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Tcp"},"tls":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Tls"},"request":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Request"},"response":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Response"},"dom_interactive":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Dom Interactive"},"dom_complete":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Dom Complete"},"load":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Load"},"resource_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Resource Count"},"resource_bytes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Resource Bytes"},"resource_cached":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Resource Cached"},"device_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Device Type"},"connection_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Connection Type"}},"type":"object","required":["session_id","route"],"title":"VitalsPayload","description":"Core Web Vitals data."},"VoidShipmentResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"shipment_id":{"type":"integer","title":"Shipment Id"},"message":{"type":"string","title":"Message"}},"type":"object","required":["success","shipment_id","message"],"title":"VoidShipmentResponse","description":"Void shipment result."},"app__api__routes__admin__UserCreateRequest":{"properties":{"email":{"type":"string","maxLength":255,"minLength":3,"title":"Email"},"password":{"type":"string","maxLength":128,"minLength":8,"title":"Password"},"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name"},"is_admin":{"type":"boolean","title":"Is Admin","default":false},"is_active":{"type":"boolean","title":"Is Active","default":true}},"type":"object","required":["email","password","name"],"title":"UserCreateRequest"},"app__api__routes__admin__UserUpdateRequest":{"properties":{"email":{"anyOf":[{"type":"string","maxLength":255,"minLength":3},{"type":"null"}],"title":"Email"},"name":{"anyOf":[{"type":"string","maxLength":100,"minLength":1},{"type":"null"}],"title":"Name"},"password":{"anyOf":[{"type":"string","maxLength":128,"minLength":8},{"type":"null"}],"title":"Password"},"is_admin":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Admin"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"UserUpdateRequest"},"app__api__routes__admin_users__UserCreateRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"name":{"type":"string","title":"Name"},"password":{"type":"string","title":"Password"},"is_admin":{"type":"boolean","title":"Is Admin","default":false},"roles":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Roles"}},"type":"object","required":["email","name","password"],"title":"UserCreateRequest","description":"Admin create user request."},"app__api__routes__admin_users__UserUpdateRequest":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"UserUpdateRequest","description":"Admin update user request."}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}},"tags":[{"name":"Health","description":"Health check and monitoring endpoints"},{"name":"Authentication","description":"User registration, login, and token management"},{"name":"Users","description":"User profile management"},{"name":"Products","description":"Product catalog and inventory management"},{"name":"Cart","description":"Shopping cart operations"},{"name":"Checkout","description":"Payment and order processing"},{"name":"Orders","description":"Order history and management"},{"name":"Comics Database","description":"Comic book search via Metron API"},{"name":"Funko Database","description":"Funko Pop! collectibles database"},{"name":"AI Grading","description":"AI-powered comic grade estimation (coming soon)"},{"name":"Config","description":"Public configuration endpoints"}]}